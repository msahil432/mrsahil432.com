/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { ChangeDetectionStrategy, Component, Inject, Input, ViewChild, } from '@angular/core';
import { ADSENSE_TOKEN } from './adsense-config';
var AdsenseComponent = /** @class */ (function () {
    function AdsenseComponent(config) {
        this.config = config;
        /**
         * can be manually set if you need all ads on a page to have same id page-xxx
         */
        this.adRegion = 'page-' + Math.floor(Math.random() * 10000) + 1;
    }
    /**
     * @return {?}
     */
    AdsenseComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ config = this.config;
        /**
         * @template T
         * @param {?} source
         * @param {?} defaultValue
         * @return {?}
         */
        function use(source, defaultValue) {
            return config && source !== undefined ? source : defaultValue;
        }
        this.adClient = use(this.adClient, config.adClient);
        this.adSlot = use(this.adSlot, config.adSlot);
        this.adFormat = use(this.adFormat, config.adFormat || 'auto');
        this.display = use(this.display, config.display || 'block');
        this.width = use(this.width, config.width);
        this.height = use(this.height, config.height);
        this.layout = use(this.layout, config.layout);
        this.layoutKey = use(this.layoutKey, config.layoutKey);
        this.pageLevelAds = use(this.pageLevelAds, config.pageLevelAds);
        this.timeOutRetry = use(this.timeOutRetry, config.timeOutRetry || 200);
        this.adtest = use(this.adtest, config.adtest);
    };
    /**
     * @return {?}
     */
    AdsenseComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ iframe = this.ins.nativeElement.querySelector('iframe');
        if (iframe && iframe.contentWindow) {
            iframe.src = 'about:blank';
            iframe.remove();
        }
    };
    /**
     * attempts to push the ad twice. Usually if one doesn't work the other
     * will depeding on if the browser has the adsense code cached and
     * if its the first page to be loaded
     */
    /**
     * attempts to push the ad twice. Usually if one doesn't work the other
     * will depeding on if the browser has the adsense code cached and
     * if its the first page to be loaded
     * @return {?}
     */
    AdsenseComponent.prototype.ngAfterViewInit = /**
     * attempts to push the ad twice. Usually if one doesn't work the other
     * will depeding on if the browser has the adsense code cached and
     * if its the first page to be loaded
     * @return {?}
     */
    function () {
        var _this = this;
        var /** @type {?} */ res = this.push();
        if (res instanceof TypeError) {
            setTimeout(function () { return _this.push(); }, this.timeOutRetry);
        }
    };
    /**
     * @return {?}
     */
    AdsenseComponent.prototype.push = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ p = {};
        if (this.pageLevelAds) {
            p.google_ad_client = this.adClient;
            p.enable_page_level_ads = true;
        }
        try {
            var /** @type {?} */ adsbygoogle = window['adsbygoogle'];
            adsbygoogle.push(p);
            return true;
        }
        catch (/** @type {?} */ e) {
            return e;
        }
    };
    AdsenseComponent.decorators = [
        { type: Component, args: [{
                    selector: 'ng2-adsense,ng-adsense',
                    template: "\n  <ins #ins class=\"adsbygoogle\"\n    [ngStyle]=\"{'display': display, 'width.px': width, 'height.px': height }\"\n    [attr.data-ad-client]=\"adClient\"\n    [attr.data-ad-slot]=\"adSlot\"\n    [attr.data-ad-format]=\"adFormat\"\n    [attr.data-ad-region]=\"adRegion\"\n    [attr.data-layout]=\"layout\"\n    [attr.data-adtest]=\"adtest\"\n    [attr.data-layout-key]=\"layoutKey\">\n  </ins>\n  ",
                    preserveWhitespaces: false,
                    changeDetection: ChangeDetectionStrategy.OnPush
                }] }
    ];
    /** @nocollapse */
    AdsenseComponent.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Inject, args: [ADSENSE_TOKEN,] },] },
    ]; };
    AdsenseComponent.propDecorators = {
        "adClient": [{ type: Input },],
        "adSlot": [{ type: Input },],
        "adFormat": [{ type: Input },],
        "adRegion": [{ type: Input },],
        "display": [{ type: Input },],
        "width": [{ type: Input },],
        "height": [{ type: Input },],
        "layout": [{ type: Input },],
        "layoutKey": [{ type: Input },],
        "pageLevelAds": [{ type: Input },],
        "timeOutRetry": [{ type: Input },],
        "adtest": [{ type: Input },],
        "ins": [{ type: ViewChild, args: ['ins',] },],
    };
    return AdsenseComponent;
}());
export { AdsenseComponent };
function AdsenseComponent_tsickle_Closure_declarations() {
    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */
    AdsenseComponent.decorators;
    /**
     * @nocollapse
     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}
     */
    AdsenseComponent.ctorParameters;
    /** @type {!Object<string,!Array<{type: !Function, args: (undefined|!Array<?>)}>>} */
    AdsenseComponent.propDecorators;
    /**
     * adsense account ca-pub-XXXXXXXXXXXXXXXX
     * @type {?}
     */
    AdsenseComponent.prototype.adClient;
    /**
     * ad slot/number
     * @type {?}
     */
    AdsenseComponent.prototype.adSlot;
    /** @type {?} */
    AdsenseComponent.prototype.adFormat;
    /**
     * can be manually set if you need all ads on a page to have same id page-xxx
     * @type {?}
     */
    AdsenseComponent.prototype.adRegion;
    /**
     * ins element display style
     * @type {?}
     */
    AdsenseComponent.prototype.display;
    /**
     * ins element height in px
     * @type {?}
     */
    AdsenseComponent.prototype.width;
    /**
     * ins element width in px
     * @type {?}
     */
    AdsenseComponent.prototype.height;
    /**
     * used for in-feed ads
     * @type {?}
     */
    AdsenseComponent.prototype.layout;
    /**
     * used for in-feed ads
     * @type {?}
     */
    AdsenseComponent.prototype.layoutKey;
    /**
     * enable page-level ads
     * @type {?}
     */
    AdsenseComponent.prototype.pageLevelAds;
    /**
     * on first load sometimes adsense is not ready
     * @type {?}
     */
    AdsenseComponent.prototype.timeOutRetry;
    /**
     * sets up some sort of google test ad
     * @type {?}
     */
    AdsenseComponent.prototype.adtest;
    /** @type {?} */
    AdsenseComponent.prototype.ins;
    /** @type {?} */
    AdsenseComponent.prototype.config;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRzZW5zZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZzItYWRzZW5zZS8iLCJzb3VyY2VzIjpbImFkc2Vuc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBRUwsdUJBQXVCLEVBQ3ZCLFNBQVMsRUFDVCxNQUFNLEVBQ04sS0FBSyxFQUdMLFNBQVMsR0FDVixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQWlCLGFBQWEsRUFBRSxNQUFNLGtCQUFrQixDQUFDOztJQTZDOUQsMEJBQ2lDO1FBQUEsV0FBTSxHQUFOLE1BQU07Ozs7d0JBcEJuQixPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQztLQXFCL0Q7Ozs7SUFFSixtQ0FBUTs7O0lBQVI7UUFDRSxxQkFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQzs7Ozs7OztRQUMzQixhQUFnQixNQUFTLEVBQUUsWUFBZTtZQUN4QyxNQUFNLENBQUMsTUFBTSxJQUFJLE1BQU0sS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDO1NBQy9EO1FBQ0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDcEQsSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDOUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsUUFBUSxJQUFJLE1BQU0sQ0FBQyxDQUFDO1FBQzlELElBQUksQ0FBQyxPQUFPLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLE9B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OzsyQkF0RGxCOztTQThCYSxnQkFBZ0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBZnRlclZpZXdJbml0LFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ29tcG9uZW50LFxuICBJbmplY3QsXG4gIElucHV0LFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgVmlld0NoaWxkLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgQWRzZW5zZUNvbmZpZywgQURTRU5TRV9UT0tFTiB9IGZyb20gJy4vYWRzZW5zZS1jb25maWcnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduZzItYWRzZW5zZSxuZy1hZHNlbnNlJyxcbiAgdGVtcGxhdGU6IGBcbiAgPGlucyAjaW5zIGNsYXNzPVwiYWRzYnlnb29nbGVcIlxuICAgIFtuZ1N0eWxlXT1cInsnZGlzcGxheSc6IGRpc3BsYXksICd3aWR0aC5weCc6IHdpZHRoLCAnaGVpZ2h0LnB4JzogaGVpZ2h0IH1cIlxuICAgIFthdHRyLmRhdGEtYWQtY2xpZW50XT1cImFkQ2xpZW50XCJcbiAgICBbYXR0ci5kYXRhLWFkLXNsb3RdPVwiYWRTbG90XCJcbiAgICBbYXR0ci5kYXRhLWFkLWZvcm1hdF09XCJhZEZvcm1hdFwiXG4gICAgW2F0dHIuZGF0YS1hZC1yZWdpb25dPVwiYWRSZWdpb25cIlxuICAgIFthdHRyLmRhdGEtbGF5b3V0XT1cImxheW91dFwiXG4gICAgW2F0dHIuZGF0YS1hZHRlc3RdPVwiYWR0ZXN0XCJcbiAgICBbYXR0ci5kYXRhLWxheW91dC1rZXldPVwibGF5b3V0S2V5XCI+XG4gIDwvaW5zPlxuICBgLFxuICBwcmVzZXJ2ZVdoaXRlc3BhY2VzOiBmYWxzZSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG59KVxuZXhwb3J0IGNsYXNzIEFkc2Vuc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XG4gIC8qKiBhZHNlbnNlIGFjY291bnQgY2EtcHViLVhYWFhYWFhYWFhYWFhYWFggKi9cbiAgQElucHV0KCkgYWRDbGllbnQ6IHN0cmluZztcbiAgLyoqIGFkIHNsb3QvbnVtYmVyICovXG4gIEBJbnB1dCgpIGFkU2xvdDogc3RyaW5nIHwgbnVtYmVyO1xuICBASW5wdXQoKSBhZEZvcm1hdDogc3RyaW5nO1xuICAvKiogY2FuIGJlIG1hbnVhbGx5IHNldCBpZiB5b3UgbmVlZCBhbGwgYWRzIG9uIGEgcGFnZSB0byBoYXZlIHNhbWUgaWQgcGFnZS14eHggKi9cbiAgQElucHV0KCkgYWRSZWdpb24gPSAncGFnZS0nICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDApICsgMTtcbiAgLyoqIGlucyBlbGVtZW50IGRpc3BsYXkgc3R5bGUgKi9cbiAgQElucHV0KCkgZGlzcGxheTogc3RyaW5nO1xuICAvKiogaW5zIGVsZW1lbnQgaGVpZ2h0IGluIHB4ICovXG4gIEBJbnB1dCgpIHdpZHRoOiBudW1iZXI7XG4gIC8qKiBpbnMgZWxlbWVudCB3aWR0aCBpbiBweCAqL1xuICBASW5wdXQoKSBoZWlnaHQ6IG51bWJlcjtcbiAgLyoqIHVzZWQgZm9yIGluLWZlZWQgYWRzICovXG4gIEBJbnB1dCgpIGxheW91dDogc3RyaW5nO1xuICAvKiogdXNlZCBmb3IgaW4tZmVlZCBhZHMgKi9cbiAgQElucHV0KCkgbGF5b3V0S2V5OiBzdHJpbmc7XG4gIC8qKiBlbmFibGUgcGFnZS1sZXZlbCBhZHMgKi9cbiAgQElucHV0KCkgcGFnZUxldmVsQWRzOiBib29sZWFuO1xuICAvKiogb24gZmlyc3QgbG9hZCBzb21ldGltZXMgYWRzZW5zZSBpcyBub3QgcmVhZHkgKi9cbiAgQElucHV0KCkgdGltZU91dFJldHJ5OiBudW1iZXI7XG4gIC8qKiBzZXRzIHVwIHNvbWUgc29ydCBvZiBnb29nbGUgdGVzdCBhZCAqL1xuICBASW5wdXQoKSBhZHRlc3Q6IHN0cmluZztcbiAgQFZpZXdDaGlsZCgnaW5zJykgaW5zOiBhbnk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQEluamVjdChBRFNFTlNFX1RPS0VOKSBwcml2YXRlIGNvbmZpZzogQWRzZW5zZUNvbmZpZyxcbiAgKSB7fVxuXG4gIG5nT25Jbml0KCkge1xuICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuY29uZmlnO1xuICAgIGZ1bmN0aW9uIHVzZTxUPihzb3VyY2U6IFQsIGRlZmF1bHRWYWx1ZTogVCk6IFQge1xuICAgICAgcmV0dXJuIGNvbmZpZyAmJiBzb3VyY2UgIT09IHVuZGVmaW5lZCA/IHNvdXJjZSA6IGRlZmF1bHRWYWx1ZTtcbiAgICB9XG4gICAgdGhpcy5hZENsaWVudCA9IHVzZSh0aGlzLmFkQ2xpZW50LCBjb25maWcuYWRDbGllbnQpO1xuICAgIHRoaXMuYWRTbG90ID0gdXNlKHRoaXMuYWRTbG90LCBjb25maWcuYWRTbG90KTtcbiAgICB0aGlzLmFkRm9ybWF0ID0gdXNlKHRoaXMuYWRGb3JtYXQsIGNvbmZpZy5hZEZvcm1hdCB8fCAnYXV0bycpO1xuICAgIHRoaXMuZGlzcGxheSA9IHVzZSh0aGlzLmRpc3BsYXksIGNvbmZpZy5kaXNwbGF5IHx8ICdibG9jaycpO1xuICAgIHRoaXMud2lkdGggPSB1c2UodGhpcy53aWR0aCwgY29uZmlnLndpZHRoKTtcbiAgICB0aGlzLmhlaWdodCA9IHVzZSh0aGlzLmhlaWdodCwgY29uZmlnLmhlaWdodCk7XG4gICAgdGhpcy5sYXlvdXQgPSB1c2UodGhpcy5sYXlvdXQsIGNvbmZpZy5sYXlvdXQpO1xuICAgIHRoaXMubGF5b3V0S2V5ID0gdXNlKHRoaXMubGF5b3V0S2V5LCBjb25maWcubGF5b3V0S2V5KTtcbiAgICB0aGlzLnBhZ2VMZXZlbEFkcyA9IHVzZSh0aGlzLnBhZ2VMZXZlbEFkcywgY29uZmlnLnBhZ2VMZXZlbEFkcyk7XG4gICAgdGhpcy50aW1lT3V0UmV0cnkgPSB1c2UodGhpcy50aW1lT3V0UmV0cnksIGNvbmZpZy50aW1lT3V0UmV0cnkgfHwgMjAwKTtcbiAgICB0aGlzLmFkdGVzdCA9IHVzZSh0aGlzLmFkdGVzdCwgY29uZmlnLmFkdGVzdCk7XG4gIH1cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgY29uc3QgaWZyYW1lID0gdGhpcy5pbnMubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdpZnJhbWUnKTtcbiAgICBpZiAoaWZyYW1lICYmIGlmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICBpZnJhbWUuc3JjID0gJ2Fib3V0OmJsYW5rJztcbiAgICAgIGlmcmFtZS5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogYXR0ZW1wdHMgdG8gcHVzaCB0aGUgYWQgdHdpY2UuIFVzdWFsbHkgaWYgb25lIGRvZXNuJ3Qgd29yayB0aGUgb3RoZXJcbiAgICogd2lsbCBkZXBlZGluZyBvbiBpZiB0aGUgYnJvd3NlciBoYXMgdGhlIGFkc2Vuc2UgY29kZSBjYWNoZWQgYW5kXG4gICAqIGlmIGl0cyB0aGUgZmlyc3QgcGFnZSB0byBiZSBsb2FkZWRcbiAgICovXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICBjb25zdCByZXMgPSB0aGlzLnB1c2goKTtcbiAgICBpZiAocmVzIGluc3RhbmNlb2YgVHlwZUVycm9yKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMucHVzaCgpLCB0aGlzLnRpbWVPdXRSZXRyeSk7XG4gICAgfVxuICB9XG5cbiAgcHVzaCgpIHtcbiAgICBjb25zdCBwOiBhbnkgPSB7fTtcbiAgICBpZiAodGhpcy5wYWdlTGV2ZWxBZHMpIHtcbiAgICAgIHAuZ29vZ2xlX2FkX2NsaWVudCA9IHRoaXMuYWRDbGllbnQ7XG4gICAgICBwLmVuYWJsZV9wYWdlX2xldmVsX2FkcyA9IHRydWU7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBhZHNieWdvb2dsZSA9IHdpbmRvd1snYWRzYnlnb29nbGUnXTtcbiAgICAgIGFkc2J5Z29vZ2xlLnB1c2gocCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZTtcbiAgICB9XG4gIH1cbn1cblxuIl19